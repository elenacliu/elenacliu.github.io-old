<!DOCTYPE html>
<html lang="en-us" dir="ltr">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="">
<meta name="theme-color" content="#FFFFFF">
<meta name="color-scheme" content="light dark"><meta property="og:title" content="OS" />
<meta property="og:description" content="" />
<meta property="og:type" content="website" />
<meta property="og:url" content="http://elenacliu.github.io/tags/OS/" />
<title>OS | cliu&#39;s Blog</title>
<link rel="manifest" href="/manifest.json">
<link rel="icon" href="/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/book.min.33a48f5432973b8ff9a82679d9e45d67f2c15d4399bd2829269455cfe390b5e8.css" integrity="sha256-M6SPVDKXO4/5qCZ52eRdZ/LBXUOZvSgpJpRVz&#43;OQteg=" crossorigin="anonymous">
  <script defer src="/flexsearch.min.js"></script>
  <script defer src="/en.search.min.7685c157665cdfcb181faef527efd5d0a7522e2aa4ec77e951d913b4bd2b32ac.js" integrity="sha256-doXBV2Zc38sYH671J&#43;/V0KdSLiqk7HfpUdkTtL0rMqw=" crossorigin="anonymous"></script>
<link rel="alternate" type="application/rss+xml" href="http://elenacliu.github.io/tags/OS/index.xml" title="cliu's Blog" />
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  
</head>
<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a class="flex align-center" href="/"><span>cliu&#39;s Blog</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>












  
















</nav>




  <script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>OS</strong>

  <label for="toc-control">
    
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  <nav>
  <ul>
  
    
    <li class="book-section-flat">
      <strong>Categories</strong>
      <ul>
      
      </ul>
    </li>
    
  
    
    <li class="book-section-flat">
      <strong>Tags</strong>
      <ul>
      
        <li class="flex justify-between">
          <a href="/tags/research/">research</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/CG/">CG</a>
          <span>4</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Maven/">Maven</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Vim/">Vim</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Pose-Estimation/">Pose Estimation</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/OS/">OS</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/figure-skating/">figure skating</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/blockchain/">blockchain</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/openssh/">openssh</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Life/">Life</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Android/">Android</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Android-Tasker/">Android, Tasker</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/">基础知识</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/%E6%9D%82%E9%A1%B9/">杂项</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/%E7%88%B1%E6%9C%BA%E7%BB%B4%E6%8A%A4/">爱机维护</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/git/">git</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/LeetCode/">LeetCode</a>
          <span>3</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/%E7%AE%97%E6%B3%95/">算法</a>
          <span>3</span>
        </li>
      
      </ul>
    </li>
    
  
  </ul>
</nav>


  </aside>
  
 
      </header>

      
      
  
  <article class="markdown book-post">
    <h2>
      <a href="/post/2023-06-12-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E4%B9%8B%E8%BF%9B%E7%A8%8B%E7%BA%BF%E7%A8%8B%E6%A8%A1%E5%9E%8B/">操作系统之进程与线程模型</a>
    </h2>
    
  <h5>June 12, 2023</h5>



  

  
  <div>
    
      <a href="/tags/OS/">OS</a>
  </div>
  




    <p>进程与线程模型 # 进程 # 进程的定义：进程是具有独立功能的程序关于某个数据集合上的一次运行活动，是系统进行资源分配和调度的独立单位。
进程状态 # 进程的基本状态：运行态、就绪态、等待态
运行：占有 CPU，并在 CPU 上运行
就绪：已经具备运行条件，但由于没有空闲 CPU，而暂时无法运行
等待/阻塞 (注意不是挂起)：因为等待某一事件（如完成 IO）而暂时不能运行
进程的其他状态 # 创建：已完成创建一进程所必要的工作。如分配了 PCB，拥有 PID。但未同意执行该进程，因为资源有限。
终止：终止执行后，进程进入该状态。可以完成一些数据统计工作，并进行资源回收。
挂起：把一个进程从内存转到磁盘。进程不占用内存空间，其进程映像（但不包括进程的代码段和数据段）交换到磁盘上。用于调节负载。
就绪挂起：suspended ready
阻塞挂起：suspended block
下面摘自：https://www.orzzone.com/process-state-transition.html
引入挂起状态后，需要实现进程在挂起（即在外存）状态和非挂起（即在内存）状态之间的转换。由于被挂起的进程不能被调度运行，因此通常将挂起状态称为静止状态，而将非挂起状态称为活跃状态。根据挂起前进程所处的状态，可以将挂起状态分为：静止就绪状态和静止阻塞状态。
系统通常将具有相同状态的进程组成一个或多个队列。为了区别，将进程基本状态中的就绪状态改称为活动就绪状态，阻塞状态改称为活动阻塞状态。相应地，我们又多了 6 种转换关系：
活动阻塞状态挂起变为静止阻塞态。主要有两种情况会发生这种挂起（进程由内存换出至外存）状态变化：①若当前不存在活动就绪进程，则至少有一个活动阻塞进程由内存兑换至外存成为静止阻塞进程，以腾出内存空间，从外存调入一个静止就绪进程使其变为活动就绪进程（保证内存中至少有一个活动就绪进程，可供进程调度程序调度运行以免CPU空闲）；②操作系统根据当前的资源状态和性能要求，可以将某些活动阻塞进程换出至外存成为静止阻塞进程。 静止阻塞态激活变为活动阻塞态。一般在满足两个条件下，系统可以激活（进程由外存换入至内存）一个静止阻塞态进程，使之成为活动阻塞进程。即：①操作系统已经得知导致该进程阻塞的事件即将结束；②内存中已经有了一大块空闲的空间。 静止阻塞态变为静止就绪态。当在外存上的静止阻塞进程所需资源得到满足或者等待的事件已经完成时，该进程由静止阻塞态变为静止就绪态（但仍然在外存）。 静止就绪态激活变为活动就绪态。主要有三种情况会发生这种激活（进程由外存换入至内存）状态变化：①外存上的静止就绪进程具有比内存中的活动就绪进程更高的优先级；②内存中已经有了一大块空闲的空间；③当前内存中没有活动就绪进程。 活动就绪态挂起变为静止就绪态。这种状态变化主要是由于系统调节负荷（即内存紧张）的需要，或者是系统优化性能的需求，而将某些目前暂不需要运行的活动就绪进程由内存换出至外存。 运行态挂起（由内存换出至外存）变为静止就绪态。这种状态变化制药是运行进程出现了错误或异常，或者是对运行进程进行分析的需要。 可见，只有处于活动就绪态的进程，才能参与进程调度得到CPU，并在获得CPU后立即投入运行。具有挂起状态的系统虽然提高了内存的利用率，但同时也使管理更加复杂，且增加了系统的开销。
进程控制块 PCB（Process Control Block） # 操作系统表示进程的一个专门的数据结构，记录进程的各种属性，描述进程的动态变化过程。
又称为：进程描述符、进程属性
操作系统通过 PCB 来控制和管理进程
PCB 是系统感知进程存在的唯一标志 进程与 PCB 是一一对应的 Linux：task_struct
Windows: EPROCESS, KPROCESS, PEB
PCB 的主要内容
进程描述信息 进程标识符 进程名，通常基于可执行文件名 用户标识符；进程组关系 进程控制信息 当前状态；阻塞原因 优先级 代码执行入口地址 可执行文件名（磁盘地址） 运行统计信息（执行时间页面调度） 进程间同步和通信 进程的队列指针 进程的消息队列指针 所拥有的资源和使用情况 虚拟地址空间的现状 打开文件列表 CPU 现场信息 寄存器值（通用寄存器、PC、PSW、栈指针） 指向赋予该进程的段/页表的指针 进程地址空间 # /proc/{pid}/maps 文件
        <a href="/post/2023-06-12-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E4%B9%8B%E8%BF%9B%E7%A8%8B%E7%BA%BF%E7%A8%8B%E6%A8%A1%E5%9E%8B/">...</a>
      
    </p>
  </article>
  
  <article class="markdown book-post">
    <h2>
      <a href="/post/2023-06-11-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E4%B9%8B%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E6%9C%BA%E5%88%B6/">操作系统之异常处理机制</a>
    </h2>
    
  <h5>June 11, 2023</h5>



  

  
  <div>
    
      <a href="/tags/OS/">OS</a>
  </div>
  




    <p>异常处理 # 寄存器 # 处理器由运算器、控制器、一系列的寄存器以及高速缓存构成。
用户可见寄存器：机器语言可以直接引用
数据寄存器：也称为通用寄存器 地址寄存器：地址寄存器可以分为两种类型：一种是基地址寄存器，它存储的是变量或数组的起始地址; 另一种是偏移地址寄存器，它存储的是相对于基地址的偏移地址。 条件码寄存器：条件码（condition code）寄存器，是 CPU 维护的一组单个位的用于描述最近的算术或逻辑操作的状态属性，条件分支指令可以检测这些寄存器的值来确定转移方向,最常用的条件码有: CF（进位标志）、ZF（零标志）、SF（符号标志）、OF（溢出标志） 控制和状态寄存器：用于控制处理器的操作，在某种特权级别下可以访问和修改
程序计数器（PC）：用来存储指向下一条指令的地址 指令寄存器（IR：instruction register）：用于取指后暂存当前正在执行的指令 程序状态字（PSW：program status word）：PSW用来存放两类信息：一类是体现当前指令执行结果的各种状态信息，称为状态标志，如有无借位进位（CY位）、有无溢出（OF位）、结果正负（SF位）、结果是否为零（ZF位）、奇偶标志位（PF位）等；另一类是存放控制信息，称为控制状态，如允许中断(IF位)，跟踪标志（TF位），方向标志(DF)等。有些机器中将PSW称为标志寄存器FR（Flag Register）。 比如 x86 的 FLAGS 寄存器：
低 16 位是 FLAGS
中间 16 位是 EFLAGS
IOPL：I/O 特权级
NT：嵌套任务标志
RF：重新启动标志
AC：对准检查方式位
VIF：虚拟中断标志
VIP：虚拟中断 pending 标志
ID：The ID flag (bit 21) in the EFLAGS register indicates support for the CPUID instruction. If a software procedure can set and clear this flag, the processor executing the procedure supports the CPUID instruction.
        <a href="/post/2023-06-11-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E4%B9%8B%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E6%9C%BA%E5%88%B6/">...</a>
      
    </p>
  </article>
  

  
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">





</div>



  <script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script>





 
        
      </footer>

      
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      <div class="book-toc-content">
        
  <nav>
  <ul>
  
    
    <li class="book-section-flat">
      <strong>Categories</strong>
      <ul>
      
      </ul>
    </li>
    
  
    
    <li class="book-section-flat">
      <strong>Tags</strong>
      <ul>
      
        <li class="flex justify-between">
          <a href="/tags/research/">research</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/CG/">CG</a>
          <span>4</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Maven/">Maven</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Vim/">Vim</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Pose-Estimation/">Pose Estimation</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/OS/">OS</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/figure-skating/">figure skating</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/blockchain/">blockchain</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/openssh/">openssh</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Life/">Life</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Android/">Android</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/Android-Tasker/">Android, Tasker</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/">基础知识</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/%E6%9D%82%E9%A1%B9/">杂项</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/%E7%88%B1%E6%9C%BA%E7%BB%B4%E6%8A%A4/">爱机维护</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/git/">git</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/LeetCode/">LeetCode</a>
          <span>3</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/%E7%AE%97%E6%B3%95/">算法</a>
          <span>3</span>
        </li>
      
      </ul>
    </li>
    
  
  </ul>
</nav>

 
      </div>
    </aside>
    
  </main>

  
</body>
</html>












